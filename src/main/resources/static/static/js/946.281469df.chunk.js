"use strict";(self.webpackChunkfrontend=self.webpackChunkfrontend||[]).push([[946],{946:(e,t,a)=>{a.r(t),a.d(t,{default:()=>c});var s=a(43),l=a(216),n=a(213),r=(a(665),a(945),a(579));const c=()=>{const e=(0,l.Zp)(),[t,a]=(0,s.useState)(""),[c,o]=(0,s.useState)(""),[i,d]=(0,s.useState)([]),[p,m]=(0,s.useState)([]),[u,h]=(0,s.useState)({}),[x,y]=(0,s.useState)(""),[N,g]=(0,s.useState)(""),[j,b]=(0,s.useState)(""),[v,f]=(0,s.useState)(""),[w,k]=(0,s.useState)(""),[$,S]=(0,s.useState)(!1),[C,L]=(0,s.useState)(!1),[A,E]=(0,s.useState)(!1),z=(0,s.useRef)(null),I=(0,s.useRef)(null),O=(0,s.useRef)(null),[D,M]=(0,s.useState)({page:1,size:10,type:"",keyword:"",link:"",getLink(){let e="";const{page:t,size:a,type:s,keyword:l}=this;return e+=`page=${t}&size=${a}`,s&&s.length>0&&(e+=`&type=${s}`),l&&(e+=`&keyword=${encodeURIComponent(l)}`),e}}),{page:R,size:T,type:_}=D,H=D?D.getLink():"",[P,U]=(0,s.useState)(!1);(0,s.useEffect)((()=>{Z(),q(),B()}),[]),(0,s.useEffect)((()=>{F({bno:c,page:R,size:T,goLast:P,type:_})}),[c,R,T,P,_]),(0,s.useEffect)((()=>{G(C),K(C)}),[C]),(0,s.useEffect)((()=>{J(A),Q(A)}),[A]);const Z=async()=>{try{const t=await n.A.get(`http://localhost:8080/api/board/read${c}`);401===t.status&&e("/member/login?error=ACCESS_DENIED"),o(t.data.bno)}catch(t){console.error(t)}},q=async()=>{try{const e=await n.A.get("http://localhost:8080/api/user");y(e.data),a(e.data.username)}catch(e){console.error(e)}},B=()=>{try{const e=new window.bootstrap.Modal(z.current),t=()=>{e.show()},a=()=>{e.hide()},s=I.current,l=O.current;return s&&s.addEventListener("click",t),l&&l.addEventListener("click",a),()=>{s&&s.removeEventListener("click",(()=>e.show())),O.current&&O.current.removeEventListener("click",(()=>e.hide()))}}catch(e){console.error(e)}},F=async e=>{let{bno:t,page:a,size:s,goLast:l,type:r}=e;try{const e=await n.A.get(`http://localhost:8080/api/replies/list/${t}`,{params:{page:a,size:s,type:r}});if(l){const a=e.data.total,l=parseInt(Math.ceil(a/s),10);return F({bno:t,page:l,size:s,type:r})}return e.data}catch(c){throw console.error(c),c}},G=async e=>{try{return(await n.A.get("http://localhost:8080/api/replies/",e)).data}catch(t){throw console.error(t),t}},J=async e=>{try{return(await n.A.get(`http://localhost:8080/api/replies/${e}`)).data}catch(t){throw console.error(t),t}},K=async e=>{try{return(await n.A.get(`http://localhost:8080/api/replies/${e.rno}`,e)).data}catch(t){throw console.error(t),t}},Q=async e=>{try{return(await n.A.get(`http://localhost:8080/api/replies/${e}`)).data}catch(t){throw console.error(t),t}},V=async function(e,t,a){let s=arguments.length>3&&void 0!==arguments[3]?arguments[3]:"board";try{F({bno:c,page:e,size:t,goLast:a,type:s}).then((e=>{(e=>{if(e&&e.length>0){const t=e.map((e=>(0,r.jsxs)("li",{className:"list-group-item d-flex replyItem",children:[(0,r.jsx)("span",{className:"col-2",children:e.rno}),(0,r.jsx)("span",{className:"col-6","data-rno":e.rno,children:e.replyText}),(0,r.jsx)("span",{className:"col-2",children:e.replyer}),(0,r.jsx)("span",{className:"col-2",children:e.regDate})]},e.rno)));d(t)}else d([])})(e.dtoList),(e=>{let t="";e.prev&&(t+=`<li class="page-item"><a class="page-link" data-page="${e.start-1}">\uc774\uc804</a></li>`);for(let a=e.start;a<=e.end;a++)t+=`<li class="page-item ${a===e.page?"active":""}"><a class="page-link" data-page="${a}">${a}</a></li>`;e.next&&(t+=`<li class="page-item"><a class="page-link" data-page="${e.end+1}">\ub2e4\uc74c</a></li>`),m(t)})(e)}))}catch(l){console.error(l)}};V(1,10,!0);return(0,r.jsx)("div",{class:"row mt-3",children:(0,r.jsxs)("div",{class:"col",children:[(0,r.jsxs)("div",{className:"card",children:[(0,r.jsx)("div",{className:"card-header",children:"\uac8c\uc2dc\uae00 \uc77d\uae30"}),(0,r.jsxs)("div",{className:"card-body",children:[(0,r.jsxs)("div",{className:"input-group mb-3",children:[(0,r.jsx)("span",{className:"input-group-text",children:"\uac8c\uc2dc\ubb3c \ubc88\ud638"}),(0,r.jsx)("input",{type:"text",className:"form-control",value:u.bno||"",readOnly:!0})]}),(0,r.jsxs)("div",{className:"input-group mb-3",children:[(0,r.jsx)("span",{className:"input-group-text",children:"\uc81c\ubaa9"}),(0,r.jsx)("input",{type:"text",className:"form-control",value:u.title||"",readOnly:!0})]}),(0,r.jsxs)("div",{className:"input-group mb-3",children:[(0,r.jsx)("span",{className:"input-group-text",children:"\ub0b4\uc6a9"}),(0,r.jsx)("textarea",{className:"form-control col-sm-5",rows:"5",readOnly:!0,children:u.content||""})]}),(0,r.jsxs)("div",{className:"input-group mb-3",children:[(0,r.jsx)("span",{className:"input-group-text",children:"\uc791\uc131\uc790"}),(0,r.jsx)("input",{type:"text",className:"form-control",value:u.writer||"",readOnly:!0})]}),(0,r.jsxs)("div",{className:"input-group mb-3",children:[(0,r.jsx)("span",{className:"input-group-text",children:"\uac8c\uc2dc\ud55c \ub0a0\uc9dc"}),(0,r.jsx)("input",{type:"text",className:"form-control",value:u.regDate||"",readOnly:!0})]}),(0,r.jsxs)("div",{className:"input-group mb-3",children:[(0,r.jsx)("span",{className:"input-group-text",children:"\uc218\uc815\ud55c \ub0a0\uc9dc"}),(0,r.jsx)("input",{type:"text",className:"form-control",value:u.modDate||"",readOnly:!0})]}),(0,r.jsx)("div",{className:"my-4",children:(0,r.jsxs)("div",{className:"float-end",children:[(0,r.jsx)("a",{href:`/board/list?${H}`,className:"text-decoration-none",children:(0,r.jsx)("button",{type:"button",className:"btn btn-primary",children:"\ubaa9\ub85d"})}),x.username===u.writer&&(0,r.jsx)("a",{href:`/board/modify?bno=${u.bno}&${H}`,className:"text-decoration-none",children:(0,r.jsx)("button",{type:"button",className:"btn btn-secondary",children:"\uc218\uc815"})})]})})]}),u.fileNames&&u.fileNames.length>0&&(0,r.jsx)("div",{className:"card",children:u.fileNames.map((e=>(0,r.jsx)("img",{className:"card-img-top",src:`http://localhost:8080/api/view/${e}`,alt:"\ud30c\uc77c"},e)))})]}),(0,r.jsx)("div",{className:"row mt-3",children:(0,r.jsxs)("div",{className:"col-md-12",children:[(0,r.jsx)("div",{className:"my-4",children:(0,r.jsx)("button",{className:"btn btn-info",onClick:()=>g("register"),children:"\ub313\uae00 \uc791\uc131"})}),(0,r.jsx)("ul",{className:"list-group replyList",children:i})]})}),(0,r.jsx)("div",{className:"row mt-3",children:(0,r.jsx)("div",{className:"col",children:(0,r.jsx)("ul",{className:"pagination replyPaging",dangerouslySetInnerHTML:{__html:p}})})}),"register"===N&&(0,r.jsx)("div",{className:"modal registerModal",tabIndex:"-1",children:(0,r.jsx)("div",{className:"modal-dialog",children:(0,r.jsxs)("div",{className:"modal-content",children:[(0,r.jsxs)("div",{className:"modal-header",children:[(0,r.jsx)("h5",{className:"modal-title",children:"\ub313\uae00 \ub4f1\ub85d"}),(0,r.jsx)("button",{type:"button",className:"btn-close",onClick:()=>g("")})]}),(0,r.jsxs)("div",{className:"modal-body",children:[(0,r.jsxs)("div",{className:"input-group mb-3",children:[(0,r.jsx)("span",{className:"input-group-text",children:"\ub313\uae00 \ub0b4\uc6a9"}),(0,r.jsx)("input",{type:"text",className:"form-control",value:j,onChange:e=>b(e.target.value)})]}),(0,r.jsxs)("div",{className:"input-group mb-3",children:[(0,r.jsx)("span",{className:"input-group-text",children:"\ub313\uae00 \uc791\uc131\uc790"}),(0,r.jsx)("input",{type:"text",className:"form-control",value:x.username,readOnly:!0})]})]}),(0,r.jsxs)("div",{className:"modal-footer",children:[(0,r.jsx)("button",{type:"button",className:"btn btn-secondary",onClick:()=>g(""),children:"\ucde8\uc18c"}),(0,r.jsx)("button",{type:"button",className:"btn btn-primary",onClick:async()=>{try{const e={bno:c,replyText:j,replyer:v};await n.A.post("http://localhost:8080/api/replies/",e),alert(e.bno+"\ub313\uae00\uc774 \ub4f1\ub85d\ub418\uc5c8\uc2b5\ub2c8\ub2e4."),b(""),f(""),V(1,10,!0)}catch(e){alert("\ub313\uae00 \ub4f1\ub85d \uc911 \uc624\ub958 \ubc1c\uc0dd")}},children:"\ub4f1\ub85d"})]})]})})}),"modify"===N&&(0,r.jsx)("div",{className:"modal modifyModal",tabIndex:"-1",children:(0,r.jsx)("div",{className:"modal-dialog",children:(0,r.jsxs)("div",{className:"modal-content",children:[(0,r.jsxs)("div",{className:"modal-header",children:[(0,r.jsx)("h5",{className:"modal-title",children:"\ub313\uae00 \uc218\uc815"}),(0,r.jsx)("button",{type:"button",className:"btn-close",onClick:()=>g("")})]}),(0,r.jsx)("div",{className:"modal-body",children:(0,r.jsxs)("div",{className:"input-group mb-3",children:[(0,r.jsx)("span",{className:"input-group-text",children:"\ub313\uae00 \ub0b4\uc6a9"}),(0,r.jsx)("input",{type:"text",className:"form-control",value:w,onChange:e=>k(e.target.value)})]})}),(0,r.jsxs)("div",{className:"modal-footer",children:[(0,r.jsx)("button",{type:"button",className:"btn btn-secondary",onClick:()=>g(""),children:"\ucde8\uc18c"}),(0,r.jsx)("button",{type:"button",className:"btn btn-primary",onClick:async()=>{if($)try{const e={bno:c,rno:u.rno,replyText:w};await n.A.put(`http://localhost:8080/api/replies/${u.rno}`,e),alert(e.rno+"\ub313\uae00\uc774 \uc218\uc815\ub418\uc5c8\uc2b5\ub2c8\ub2e4."),k(""),V(R,T)}catch(e){console.error(e)}else alert("\ub313\uae00 \uc791\uc131\uc790\ub9cc \uc218\uc815\uc774 \uac00\ub2a5\ud569\ub2c8\ub2e4.")},children:"\uc218\uc815"}),(0,r.jsx)("button",{type:"button",className:"btn btn-danger",onClick:async()=>{if($)try{await n.A.delete(`http://localhost:8080/api/replies/${u.rno}`),alert("\ub313\uae00\uc774 \uc0ad\uc81c\ub418\uc5c8\uc2b5\ub2c8\ub2e4."),k(""),M((e=>({...e,page:1}))),V(R,T)}catch(e){console.error(e)}else alert("\ub313\uae00 \uc791\uc131\uc790\ub9cc \uc0ad\uc81c\uac00 \uac00\ub2a5\ud569\ub2c8\ub2e4.")},children:"\uc0ad\uc81c"})]})]})})})]})})}}}]);
//# sourceMappingURL=946.281469df.chunk.js.map