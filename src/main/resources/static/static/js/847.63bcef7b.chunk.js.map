{"version":3,"file":"static/js/847.63bcef7b.chunk.js","mappings":"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","sources":["pages/board/read.js","reply.js"],"sourcesContent":["import React, {useState, useEffect, useRef} from 'react';\nimport {useNavigate} from 'react-router-dom';\nimport axios from 'axios';\nimport 'bootstrap/dist/css/bootstrap.min.css';\nimport 'bootstrap/dist/js/bootstrap.bundle.min.js';\nimport {addReply, modifyReply, getReply, removeReply} from '../../reply';\n\nconst BoardRead = () => {\n    const navigate = useNavigate();\n    const [currentUser, setCurrentUser] = useState('');\n    const [bno, setBno] = useState('');\n    const [replyList, setReplyList] = useState([]);\n    const [replyPaging, setReplyPaging] = useState([]);\n    const [dto, setDto] = useState({});\n    const [user, setUser] = useState('');\n    const [modalType, setModalType] = useState('');\n    const [replyText, setReplyText] = useState('');\n    const [replyer, setReplyer] = useState('');\n    const [modifyText, setModifyText] = useState('');\n    const [hasAuth, setHasAuth] = useState(false);\n    const [replyObj, setReplyObj] = useState(false);\n    const [rno, setRno] = useState(false);\n\n    const registerModalRef = useRef(null);\n    const addReplyBtnRef = useRef(null);\n    const closeRegisterBtnRef = useRef(null);\n    const [pageRequestDTO, setPageRequestDTO] = useState({\n        page: 1,\n        size: 10,\n        type: '',\n        keyword: '',\n        link: '',\n        getLink() {\n            let link = '';\n\n            const { page, size, type, keyword } = this;\n\n            link += `page=${page}&size=${size}`;\n\n            if (type && type.length > 0) {\n                link += `&type=${type}`;\n            }\n\n            if (keyword) {\n                link += `&keyword=${encodeURIComponent(keyword)}`;\n            }\n\n            return link;\n        }\n    });\n    const { page, size, type} = pageRequestDTO;\n    const link = pageRequestDTO ? pageRequestDTO.getLink() : '';\n    const [goLast, setGoLast] = useState(false);\n\n    useEffect(() => {\n        fetchBoardData();\n        fetchUserData();\n        fetchModal();\n    }, []);\n\n    useEffect(() => {\n        getList({bno,page,size,goLast,type});\n    }, [bno,page,size,goLast,type]);\n\n    useEffect(() => {\n        addReply(replyObj);\n        modifyReply(replyObj);\n    }, [replyObj]);\n\n    useEffect(() => {\n        getReply(rno);\n        removeReply(rno);\n    }, [rno]);\n\n    const fetchBoardData = async () => {\n        try {\n            const response = await axios.get(`http://localhost:8080/api/board/read${bno}`);\n            setBno(response.data.bno);\n            // printReplies(1, 10, true);\n        } catch (error) {\n            if (error.response && error.response.status === 400) {\n                // 서버에서 400 응답을 받은 경우, 리다이렉트\n                navigate('/member/login?error=ACCESS_DENIED');\n            }\n            console.error(error);\n        }\n    };\n\n    const fetchUserData = async () => {\n        try {\n            const response = await axios.get('http://localhost:8080/api/user');\n            setUser(response.data);\n            setCurrentUser(response.data.username);\n        } catch (error) {\n            console.error(error);\n        }\n    };\n\n    const fetchModal = () => {\n        try {\n            const registerModal = new window.bootstrap.Modal(registerModalRef.current);\n\n            // 댓글 추가 버튼 클릭 시 모달 표시\n            const handleAddReplyClick = () => {\n                registerModal.show();\n            };\n\n            // 닫기 버튼 클릭 시 모달 숨기기\n            const handleCloseRegisterClick = () => {\n                registerModal.hide();\n            };\n\n            // 이벤트 리스너 설정\n            const addReplyBtn = addReplyBtnRef.current;\n            const closeRegisterBtn = closeRegisterBtnRef.current;\n\n            if (addReplyBtn) {\n                addReplyBtn.addEventListener('click', handleAddReplyClick);\n            }\n\n            if (closeRegisterBtn) {\n                closeRegisterBtn.addEventListener('click', handleCloseRegisterClick);\n            }\n\n            return () => {\n                if (addReplyBtn) {\n                    addReplyBtn.removeEventListener('click', () => registerModal.show());\n                }\n                if (closeRegisterBtnRef.current) {\n                    closeRegisterBtnRef.current.removeEventListener('click', () => registerModal.hide());\n                }\n            };\n        } catch (error) {\n            console.error(error);\n        }\n    };\n\n    const getList = async ({bno, page, size, goLast, type}) => {\n        try {\n            const response = await axios.get(`http://localhost:8080/api/replies/list/${bno}`,{\n                params: {page, size, type}\n            });\n\n            if (goLast) {\n                const total = response.data.total;\n                const lastPage = parseInt(Math.ceil(total / size), 10);\n\n                // 마지막 페이지를 요청하여 재귀 호출\n                return getList({bno: bno, page: lastPage, size: size, type: type});\n            }\n            return response.data\n        } catch (error) {\n            console.error(error);\n            throw error;\n        }\n    };\n\n    const printList = (dtoList) => {\n\n        if (dtoList && dtoList.length > 0) {\n            const listHtml = dtoList.map(dto => (\n                <li key={dto.rno} className=\"list-group-item d-flex replyItem\">\n                    <span className=\"col-2\">{dto.rno}</span>\n                    <span className=\"col-6\" data-rno={dto.rno}>{dto.replyText}</span>\n                    <span className=\"col-2\">{dto.replyer}</span>\n                    <span className=\"col-2\">{dto.regDate}</span>\n                </li>\n            ));\n            setReplyList(listHtml);\n        } else {\n            setReplyList([]);\n        }\n    };\n\n    const printPages = (data) => {\n        let pageStr = '';\n\n        if (data.prev) {\n            pageStr += `<li class=\"page-item\"><a class=\"page-link\" data-page=\"${data.start - 1}\">이전</a></li>`;\n        }\n\n        for (let i = data.start; i <= data.end; i++) {\n            pageStr += `<li class=\"page-item ${i === data.page ? 'active' : ''}\"><a class=\"page-link\" data-page=\"${i}\">${i}</a></li>`;\n        }\n\n        if (data.next) {\n            pageStr += `<li class=\"page-item\"><a class=\"page-link\" data-page=\"${data.end + 1}\">다음</a></li>`;\n        }\n\n        setReplyPaging(pageStr);\n    };\n\n    const printReplies = async (page, size, goLast, type = 'board') => {\n        try {\n            getList({bno, page, size, goLast, type}).then(\n                data => {\n                    printList(data.dtoList); //목록 처리\n                    printPages(data);\n                }\n            )\n        } catch (error) {\n            console.error(error);\n        }\n    };\n\n    printReplies(1,10, true)\n\n    const handleRegister = async () => {\n        try {\n            const replyObj = { bno, replyText, replyer };\n            await axios.post('http://localhost:8080/api/replies/', replyObj);\n            alert(replyObj.bno + '댓글이 등록되었습니다.');\n            setReplyText('');\n            setReplyer('');\n            printReplies(1, 10, true);\n        } catch (error) {\n            alert('댓글 등록 중 오류 발생');\n        }\n    };\n\n    const handleModifyReply = async () => {\n        if (!hasAuth) {\n            alert('댓글 작성자만 수정이 가능합니다.');\n            return;\n        }\n\n        try {\n            const replyObj = { bno, rno: dto.rno, replyText: modifyText };\n            await axios.put(`http://localhost:8080/api/replies/${dto.rno}`, replyObj);\n            alert(replyObj.rno +'댓글이 수정되었습니다.');\n            setModifyText('');\n            printReplies(page,size);\n        } catch (error) {\n            console.error(error);\n        }\n    };\n\n    const handleRemoveReply = async () => {\n        if (!hasAuth) {\n            alert('댓글 작성자만 삭제가 가능합니다.');\n            return;\n        }\n\n        try {\n            await axios.delete(`http://localhost:8080/api/replies/${dto.rno}`);\n            alert('댓글이 삭제되었습니다.');\n            setModifyText('');\n            setPageRequestDTO(prevState => ({\n                ...prevState,  // 이전 상태를 복사\n                page: 1        // page 값을 1로 업데이트\n            }));\n            printReplies(page, size);\n        } catch (error) {\n            console.error(error);\n        }\n    };\n\n    return (\n        <div class=\"row mt-3\">\n            <div class=\"col\">\n            <div className=\"card\">\n                <div className=\"card-header\">게시글 읽기</div>\n                <div className=\"card-body\">\n                    <div className=\"input-group mb-3\">\n                        <span className=\"input-group-text\">게시물 번호</span>\n                        <input type=\"text\" className=\"form-control\" value={dto.bno || ''} readOnly />\n                    </div>\n                    <div className=\"input-group mb-3\">\n                        <span className=\"input-group-text\">제목</span>\n                        <input type=\"text\" className=\"form-control\" value={dto.title || ''} readOnly />\n                    </div>\n                    <div className=\"input-group mb-3\">\n                        <span className=\"input-group-text\">내용</span>\n                        <textarea className=\"form-control col-sm-5\" rows=\"5\" readOnly>{dto.content || ''}</textarea>\n                    </div>\n                    <div className=\"input-group mb-3\">\n                        <span className=\"input-group-text\">작성자</span>\n                        <input type=\"text\" className=\"form-control\" value={dto.writer || ''} readOnly />\n                    </div>\n                    <div className=\"input-group mb-3\">\n                        <span className=\"input-group-text\">게시한 날짜</span>\n                        <input type=\"text\" className=\"form-control\" value={dto.regDate || ''} readOnly />\n                    </div>\n                    <div className=\"input-group mb-3\">\n                        <span className=\"input-group-text\">수정한 날짜</span>\n                        <input type=\"text\" className=\"form-control\" value={dto.modDate || ''} readOnly />\n                    </div>\n                    <div className=\"my-4\">\n                        <div className=\"float-end\">\n                            <a href={`/board/list?${link}`} className=\"text-decoration-none\">\n                                <button type=\"button\" className=\"btn btn-primary\">목록</button>\n                            </a>\n                            {user.username === dto.writer && (\n                                <a href={`/board/modify?bno=${dto.bno}&${link}`} className=\"text-decoration-none\">\n                                    <button type=\"button\" className=\"btn btn-secondary\">수정</button>\n                                </a>\n                            )}\n                        </div>\n                    </div>\n                </div>\n                {dto.fileNames && dto.fileNames.length > 0 && (\n                    <div className=\"card\">\n                        {dto.fileNames.map(fileName => (\n                            <img key={fileName} className=\"card-img-top\" src={`http://localhost:8080/api/view/${fileName}`} alt=\"파일\" />\n                        ))}\n                    </div>\n                )}\n            </div>\n            <div className=\"row mt-3\">\n                <div className=\"col-md-12\">\n                    <div className=\"my-4\">\n                        <button className=\"btn btn-info\" onClick={() => setModalType('register')}>댓글 작성</button>\n                    </div>\n                    <ul className=\"list-group replyList\">\n                        {replyList}\n                    </ul>\n                </div>\n            </div>\n            <div className=\"row mt-3\">\n                <div className=\"col\">\n                    <ul className=\"pagination replyPaging\" dangerouslySetInnerHTML={{ __html: replyPaging }} />\n                </div>\n            </div>\n\n            {/* Register Modal */}\n            {modalType === 'register' && (\n                <div className=\"modal registerModal\" tabIndex=\"-1\">\n                    <div className=\"modal-dialog\">\n                        <div className=\"modal-content\">\n                            <div className=\"modal-header\">\n                                <h5 className=\"modal-title\">댓글 등록</h5>\n                                <button type=\"button\" className=\"btn-close\" onClick={() => setModalType('')}></button>\n                            </div>\n                            <div className=\"modal-body\">\n                                <div className=\"input-group mb-3\">\n                                    <span className=\"input-group-text\">댓글 내용</span>\n                                    <input type=\"text\" className=\"form-control\" value={replyText} onChange={e => setReplyText(e.target.value)} />\n                                </div>\n                                <div className=\"input-group mb-3\">\n                                    <span className=\"input-group-text\">댓글 작성자</span>\n                                    <input type=\"text\" className=\"form-control\" value={user.username} readOnly />\n                                </div>\n                            </div>\n                            <div className=\"modal-footer\">\n                                <button type=\"button\" className=\"btn btn-secondary\" onClick={() => setModalType('')}>취소</button>\n                                <button type=\"button\" className=\"btn btn-primary\" onClick={handleRegister}>등록</button>\n                            </div>\n                        </div>\n                    </div>\n                </div>\n            )}\n\n            {/* Modify Modal */}\n            {modalType === 'modify' && (\n                <div className=\"modal modifyModal\" tabIndex=\"-1\">\n                    <div className=\"modal-dialog\">\n                        <div className=\"modal-content\">\n                            <div className=\"modal-header\">\n                                <h5 className=\"modal-title\">댓글 수정</h5>\n                                <button type=\"button\" className=\"btn-close\" onClick={() => setModalType('')}></button>\n                            </div>\n                            <div className=\"modal-body\">\n                                <div className=\"input-group mb-3\">\n                                    <span className=\"input-group-text\">댓글 내용</span>\n                                    <input type=\"text\" className=\"form-control\" value={modifyText} onChange={e => setModifyText(e.target.value)} />\n                                </div>\n                            </div>\n                            <div className=\"modal-footer\">\n                                <button type=\"button\" className=\"btn btn-secondary\" onClick={() => setModalType('')}>취소</button>\n                                <button type=\"button\" className=\"btn btn-primary\" onClick={handleModifyReply}>수정</button>\n                                <button type=\"button\" className=\"btn btn-danger\" onClick={handleRemoveReply}>삭제</button>\n                            </div>\n                        </div>\n                    </div>\n                </div>\n            )}\n            </div>\n        </div>/* layout fragment end */\n    );\n};\n\nexport default BoardRead;","import axios from 'axios';\nasync function get1(bno) {\n\n    const result = await axios.get(`http://localhost:8080/api/replies/list/${bno}`)\n\n    //console.log(result)\n\n    return result;\n}\n\nasync function getList({bno, page, size, goLast, type}){\n    try {\n        const result = await axios.get(`http://localhost:8080/api/replies/list/${bno}`, {params: {page, size, type}})\n\n        if(goLast){\n            const total = result.data.total\n            const lastPage = parseInt(Math.ceil(total/size))\n\n            return getList({bno:bno, page:lastPage, size:size, type:type})\n\n        }\n        return result.data\n    } catch (error) {\n        console.error(error);\n        throw error;\n    }\n}\n\n\nasync function addReply(replyObj) {\n    try {\n        const response = await axios.post(`http://localhost:8080/api/replies/`,replyObj)\n        return response.data\n    } catch (error) {\n        console.error(error);\n        throw error;\n    }\n}\n\nasync function getReply(rno) {\n    try {\n        const response = await axios.get(`http://localhost:8080/api/replies/${rno}`)\n        return response.data\n    } catch (error) {\n        console.error(error);\n        throw error;\n    }\n}\n\nasync function modifyReply(replyObj) {\n    try {\n        const response = await axios.put(`http://localhost:8080/api/replies/${replyObj.rno}`, replyObj)\n        return response.data\n    } catch (error) {\n        console.error(error);\n        throw error;\n    }\n}\n\nasync function removeReply(rno) {\n    try {\n        const response = await axios.delete(`http://localhost:8080/api/replies/${rno}`)\n        return response.data\n    } catch (error) {\n        console.error(error);\n        throw error;\n    }\n}\n\nexport {getList, modifyReply, getReply, removeReply, addReply};"],"names":["BoardRead","navigate","useNavigate","currentUser","setCurrentUser","useState","bno","setBno","replyList","setReplyList","replyPaging","setReplyPaging","dto","setDto","user","setUser","modalType","setModalType","replyText","setReplyText","replyer","setReplyer","modifyText","setModifyText","hasAuth","setHasAuth","replyObj","setReplyObj","rno","setRno","registerModalRef","useRef","addReplyBtnRef","closeRegisterBtnRef","pageRequestDTO","setPageRequestDTO","page","size","type","keyword","link","getLink","this","length","encodeURIComponent","goLast","setGoLast","useEffect","fetchBoardData","fetchUserData","fetchModal","getList","async","axios","post","data","error","console","addReply","put","modifyReply","get","getReply","delete","removeReply","response","status","username","registerModal","window","bootstrap","Modal","current","handleAddReplyClick","show","handleCloseRegisterClick","hide","addReplyBtn","closeRegisterBtn","addEventListener","removeEventListener","_ref","params","total","lastPage","parseInt","Math","ceil","printReplies","arguments","undefined","then","dtoList","listHtml","map","_jsxs","className","children","_jsx","regDate","printList","pageStr","prev","start","i","end","next","printPages","class","value","readOnly","title","rows","content","writer","modDate","href","fileNames","fileName","src","alt","onClick","dangerouslySetInnerHTML","__html","tabIndex","onChange","e","target","alert","prevState"],"sourceRoot":""}