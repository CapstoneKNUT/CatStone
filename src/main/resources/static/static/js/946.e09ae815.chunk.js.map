{"version":3,"file":"static/js/946.e09ae815.chunk.js","mappings":"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","sources":["pages/board/read.js"],"sourcesContent":["import React, {useState, useEffect, useRef} from 'react';\nimport axios from 'axios';\nimport 'bootstrap/dist/css/bootstrap.min.css';\nimport 'bootstrap/dist/js/bootstrap.bundle.min.js';\n\nconst BoardRead = () => {\n    const [currentUser, setCurrentUser] = useState('');\n    const [bno, setBno] = useState('');\n    const [replyList, setReplyList] = useState([]);\n    const [replyPaging, setReplyPaging] = useState([]);\n    const [dto, setDto] = useState({});\n    const [user, setUser] = useState('');\n    const [modalType, setModalType] = useState('');\n    const [replyText, setReplyText] = useState('');\n    const [replyer, setReplyer] = useState('');\n    const [modifyText, setModifyText] = useState('');\n    const [hasAuth, setHasAuth] = useState(false);\n    const [replyObj, setReplyObj] = useState(false);\n    const [rno, setRno] = useState(false);\n\n    const registerModalRef = useRef(null);\n    const addReplyBtnRef = useRef(null);\n    const closeRegisterBtnRef = useRef(null);\n    const [pageRequestDTO, setPageRequestDTO] = useState({\n        page: 1,\n        size: 10,\n        type: '',\n        keyword: '',\n        link: ''\n    });\n    const { page, size, type} = pageRequestDTO;\n    const link = pageRequestDTO ? pageRequestDTO.getLink() : '';\n    const [goLast, setGoLast] = useState(false);\n    const getLink = (pageRequestDTO) => {\n        let link = '';\n\n        if (!pageRequestDTO) {\n            return link;\n        }\n\n        const { page, size, type, keyword } = pageRequestDTO;\n\n        // page와 size가 있다면 링크 생성\n        link += `page=${page}&size=${size}`;\n\n        // type이 존재하면 링크에 추가\n        if (type && type.length > 0) {\n            link += `&type=${type}`;\n        }\n\n        // keyword가 존재하면 링크에 추가 (UTF-8 인코딩 필요)\n        if (keyword) {\n            link += `&keyword=${encodeURIComponent(keyword)}`;\n        }\n\n        return link;\n    };\n\n    useEffect(() => {\n        fetchBoardData();\n        fetchUserData();\n        fetchModal();\n    }, []);\n\n    useEffect(() => {\n        getList({bno,page,size,goLast,type});\n    }, [bno,page,size,goLast,type]);\n\n    useEffect(() => {\n        addReply(replyObj);\n        modifyReply(replyObj);\n    }, [replyObj]);\n\n    useEffect(() => {\n        getReply(rno);\n        removeReply(rno);\n    }, [rno]);\n\n    const fetchBoardData = async () => {\n        try {\n            const response = await axios.get(`http://localhost:8080/api/board/read${bno}`);\n            setBno(response.data.bno);\n            // printReplies(1, 10, true);\n        } catch (error) {\n            console.error(error);\n        }\n    };\n\n    const fetchUserData = async () => {\n        try {\n            const response = await axios.get('http://localhost:8080/api/user');\n            setUser(response.data);\n            setCurrentUser(response.data.username);\n        } catch (error) {\n            console.error(error);\n        }\n    };\n\n    const fetchModal = () => {\n        try {\n            const registerModal = new window.bootstrap.Modal(registerModalRef.current);\n\n            // 댓글 추가 버튼 클릭 시 모달 표시\n            const handleAddReplyClick = () => {\n                registerModal.show();\n            };\n\n            // 닫기 버튼 클릭 시 모달 숨기기\n            const handleCloseRegisterClick = () => {\n                registerModal.hide();\n            };\n\n            // 이벤트 리스너 설정\n            const addReplyBtn = addReplyBtnRef.current;\n            const closeRegisterBtn = closeRegisterBtnRef.current;\n\n            if (addReplyBtn) {\n                addReplyBtn.addEventListener('click', handleAddReplyClick);\n            }\n\n            if (closeRegisterBtn) {\n                closeRegisterBtn.addEventListener('click', handleCloseRegisterClick);\n            }\n\n            return () => {\n                if (addReplyBtn) {\n                    addReplyBtn.removeEventListener('click', () => registerModal.show());\n                }\n                if (closeRegisterBtnRef.current) {\n                    closeRegisterBtnRef.current.removeEventListener('click', () => registerModal.hide());\n                }\n            };\n        } catch (error) {\n            console.error(error);\n        }\n    };\n\n    const getList = async ({bno, page, size, goLast, type}) => {\n        try {\n            const response = await axios.get(`http://localhost:8080/api/replies/list/${bno}`,{\n                params: {page, size, type}\n            });\n\n            if (goLast) {\n                const total = response.data.total;\n                const lastPage = parseInt(Math.ceil(total / size), 10);\n\n                // 마지막 페이지를 요청하여 재귀 호출\n                return getList({bno: bno, page: lastPage, size: size, type: type});\n            }\n            return response.data\n        } catch (error) {\n            console.error(error);\n            throw error;\n        }\n    };\n\n    const addReply = async (replyObj) => {\n        try {\n            const response = await axios.get(`http://localhost:8080/api/replies/`,replyObj)\n            return response.data\n        } catch (error) {\n            console.error(error);\n            throw error;\n        }\n    };\n\n    const getReply = async (rno) => {\n        try {\n            const response = await axios.get(`http://localhost:8080/api/replies/${rno}`)\n            return response.data\n        } catch (error) {\n            console.error(error);\n            throw error;\n        }\n    };\n\n    const modifyReply = async (replyObj) => {\n        try {\n            const response = await axios.get(`http://localhost:8080/api/replies/${replyObj.rno}`, replyObj)\n            return response.data\n        } catch (error) {\n            console.error(error);\n            throw error;\n        }\n    };\n\n    const removeReply = async (rno) => {\n        try {\n            const response = await axios.get(`http://localhost:8080/api/replies/${rno}`)\n            return response.data\n        } catch (error) {\n            console.error(error);\n            throw error;\n        }\n    };\n\n    const printList = (dtoList) => {\n\n        if (dtoList && dtoList.length > 0) {\n            const listHtml = dtoList.map(dto => (\n                <li key={dto.rno} className=\"list-group-item d-flex replyItem\">\n                    <span className=\"col-2\">{dto.rno}</span>\n                    <span className=\"col-6\" data-rno={dto.rno}>{dto.replyText}</span>\n                    <span className=\"col-2\">{dto.replyer}</span>\n                    <span className=\"col-2\">{dto.regDate}</span>\n                </li>\n            ));\n            setReplyList(listHtml);\n        } else {\n            setReplyList([]);\n        }\n    };\n\n    const printPages = (data) => {\n        let pageStr = '';\n\n        if (data.prev) {\n            pageStr += `<li class=\"page-item\"><a class=\"page-link\" data-page=\"${data.start - 1}\">이전</a></li>`;\n        }\n\n        for (let i = data.start; i <= data.end; i++) {\n            pageStr += `<li class=\"page-item ${i === data.page ? 'active' : ''}\"><a class=\"page-link\" data-page=\"${i}\">${i}</a></li>`;\n        }\n\n        if (data.next) {\n            pageStr += `<li class=\"page-item\"><a class=\"page-link\" data-page=\"${data.end + 1}\">다음</a></li>`;\n        }\n\n        setReplyPaging(pageStr);\n    };\n\n    const printReplies = async (page, size, goLast, type = 'board') => {\n        try {\n            getList({bno, page, size, goLast, type}).then(\n                data => {\n                    printList(data.dtoList); //목록 처리\n                    printPages(data);\n                }\n            )\n        } catch (error) {\n            console.error(error);\n        }\n    };\n\n    printReplies(1,10, true)\n\n    const handleRegister = async () => {\n        try {\n            const replyObj = { bno, replyText, replyer };\n            await axios.post('http://localhost:8080/api/replies/', replyObj);\n            alert(replyObj.bno + '댓글이 등록되었습니다.');\n            setReplyText('');\n            setReplyer('');\n            printReplies(1, 10, true);\n        } catch (error) {\n            alert('댓글 등록 중 오류 발생');\n        }\n    };\n\n    const handleModifyReply = async () => {\n        if (!hasAuth) {\n            alert('댓글 작성자만 수정이 가능합니다.');\n            return;\n        }\n\n        try {\n            const replyObj = { bno, rno: dto.rno, replyText: modifyText };\n            await axios.put(`http://localhost:8080/api/replies/${dto.rno}`, replyObj);\n            alert(replyObj.rno +'댓글이 수정되었습니다.');\n            setModifyText('');\n            printReplies(page,size);\n        } catch (error) {\n            console.error(error);\n        }\n    };\n\n    const handleRemoveReply = async () => {\n        if (!hasAuth) {\n            alert('댓글 작성자만 삭제가 가능합니다.');\n            return;\n        }\n\n        try {\n            await axios.delete(`http://localhost:8080/api/replies/${dto.rno}`);\n            alert('댓글이 삭제되었습니다.');\n            setModifyText('');\n            setPageRequestDTO(prevState => ({\n                ...prevState,  // 이전 상태를 복사\n                page: 1        // page 값을 1로 업데이트\n            }));\n            printReplies(page, size);\n        } catch (error) {\n            console.error(error);\n        }\n    };\n\n    return (\n        <div class=\"row mt-3\">\n            <div class=\"col\">\n            <div className=\"card\">\n                <div className=\"card-header\">게시글 읽기</div>\n                <div className=\"card-body\">\n                    <div className=\"input-group mb-3\">\n                        <span className=\"input-group-text\">게시물 번호</span>\n                        <input type=\"text\" className=\"form-control\" value={dto.bno || ''} readOnly />\n                    </div>\n                    <div className=\"input-group mb-3\">\n                        <span className=\"input-group-text\">제목</span>\n                        <input type=\"text\" className=\"form-control\" value={dto.title || ''} readOnly />\n                    </div>\n                    <div className=\"input-group mb-3\">\n                        <span className=\"input-group-text\">내용</span>\n                        <textarea className=\"form-control col-sm-5\" rows=\"5\" readOnly>{dto.content || ''}</textarea>\n                    </div>\n                    <div className=\"input-group mb-3\">\n                        <span className=\"input-group-text\">작성자</span>\n                        <input type=\"text\" className=\"form-control\" value={dto.writer || ''} readOnly />\n                    </div>\n                    <div className=\"input-group mb-3\">\n                        <span className=\"input-group-text\">게시한 날짜</span>\n                        <input type=\"text\" className=\"form-control\" value={dto.regDate || ''} readOnly />\n                    </div>\n                    <div className=\"input-group mb-3\">\n                        <span className=\"input-group-text\">수정한 날짜</span>\n                        <input type=\"text\" className=\"form-control\" value={dto.modDate || ''} readOnly />\n                    </div>\n                    <div className=\"my-4\">\n                        <div className=\"float-end\">\n                            <a href={`/board/list?${link}`} className=\"text-decoration-none\">\n                                <button type=\"button\" className=\"btn btn-primary\">목록</button>\n                            </a>\n                            {user.username === dto.writer && (\n                                <a href={`/board/modify?bno=${dto.bno}&${link}`} className=\"text-decoration-none\">\n                                    <button type=\"button\" className=\"btn btn-secondary\">수정</button>\n                                </a>\n                            )}\n                        </div>\n                    </div>\n                </div>\n                {dto.fileNames && dto.fileNames.length > 0 && (\n                    <div className=\"card\">\n                        {dto.fileNames.map(fileName => (\n                            <img key={fileName} className=\"card-img-top\" src={`http://localhost:8080/api/view/${fileName}`} alt=\"파일\" />\n                        ))}\n                    </div>\n                )}\n            </div>\n            <div className=\"row mt-3\">\n                <div className=\"col-md-12\">\n                    <div className=\"my-4\">\n                        <button className=\"btn btn-info\" onClick={() => setModalType('register')}>댓글 작성</button>\n                    </div>\n                    <ul className=\"list-group replyList\">\n                        {replyList}\n                    </ul>\n                </div>\n            </div>\n            <div className=\"row mt-3\">\n                <div className=\"col\">\n                    <ul className=\"pagination replyPaging\" dangerouslySetInnerHTML={{ __html: replyPaging }} />\n                </div>\n            </div>\n\n            {/* Register Modal */}\n            {modalType === 'register' && (\n                <div className=\"modal registerModal\" tabIndex=\"-1\">\n                    <div className=\"modal-dialog\">\n                        <div className=\"modal-content\">\n                            <div className=\"modal-header\">\n                                <h5 className=\"modal-title\">댓글 등록</h5>\n                                <button type=\"button\" className=\"btn-close\" onClick={() => setModalType('')}></button>\n                            </div>\n                            <div className=\"modal-body\">\n                                <div className=\"input-group mb-3\">\n                                    <span className=\"input-group-text\">댓글 내용</span>\n                                    <input type=\"text\" className=\"form-control\" value={replyText} onChange={e => setReplyText(e.target.value)} />\n                                </div>\n                                <div className=\"input-group mb-3\">\n                                    <span className=\"input-group-text\">댓글 작성자</span>\n                                    <input type=\"text\" className=\"form-control\" value={user.username} readOnly />\n                                </div>\n                            </div>\n                            <div className=\"modal-footer\">\n                                <button type=\"button\" className=\"btn btn-secondary\" onClick={() => setModalType('')}>취소</button>\n                                <button type=\"button\" className=\"btn btn-primary\" onClick={handleRegister}>등록</button>\n                            </div>\n                        </div>\n                    </div>\n                </div>\n            )}\n\n            {/* Modify Modal */}\n            {modalType === 'modify' && (\n                <div className=\"modal modifyModal\" tabIndex=\"-1\">\n                    <div className=\"modal-dialog\">\n                        <div className=\"modal-content\">\n                            <div className=\"modal-header\">\n                                <h5 className=\"modal-title\">댓글 수정</h5>\n                                <button type=\"button\" className=\"btn-close\" onClick={() => setModalType('')}></button>\n                            </div>\n                            <div className=\"modal-body\">\n                                <div className=\"input-group mb-3\">\n                                    <span className=\"input-group-text\">댓글 내용</span>\n                                    <input type=\"text\" className=\"form-control\" value={modifyText} onChange={e => setModifyText(e.target.value)} />\n                                </div>\n                            </div>\n                            <div className=\"modal-footer\">\n                                <button type=\"button\" className=\"btn btn-secondary\" onClick={() => setModalType('')}>취소</button>\n                                <button type=\"button\" className=\"btn btn-primary\" onClick={handleModifyReply}>수정</button>\n                                <button type=\"button\" className=\"btn btn-danger\" onClick={handleRemoveReply}>삭제</button>\n                            </div>\n                        </div>\n                    </div>\n                </div>\n            )}\n            </div>\n        </div>/* layout fragment end */\n    );\n};\n\nexport default BoardRead;"],"names":["BoardRead","currentUser","setCurrentUser","useState","bno","setBno","replyList","setReplyList","replyPaging","setReplyPaging","dto","setDto","user","setUser","modalType","setModalType","replyText","setReplyText","replyer","setReplyer","modifyText","setModifyText","hasAuth","setHasAuth","replyObj","setReplyObj","rno","setRno","registerModalRef","useRef","addReplyBtnRef","closeRegisterBtnRef","pageRequestDTO","setPageRequestDTO","page","size","type","keyword","link","getLink","goLast","setGoLast","useEffect","fetchBoardData","fetchUserData","fetchModal","getList","addReply","modifyReply","getReply","removeReply","async","response","axios","get","data","error","console","username","registerModal","window","bootstrap","Modal","current","handleAddReplyClick","show","handleCloseRegisterClick","hide","addReplyBtn","closeRegisterBtn","addEventListener","removeEventListener","_ref","params","total","lastPage","parseInt","Math","ceil","printReplies","arguments","length","undefined","then","dtoList","listHtml","map","_jsxs","className","children","_jsx","regDate","printList","pageStr","prev","start","i","end","next","printPages","class","value","readOnly","title","rows","content","writer","modDate","href","fileNames","fileName","src","alt","onClick","dangerouslySetInnerHTML","__html","tabIndex","onChange","e","target","post","alert","put","delete","prevState"],"sourceRoot":""}