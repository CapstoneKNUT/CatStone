{"version":3,"file":"static/js/156.b6f4ae38.chunk.js","mappings":"+JAKA,MAAMA,EAASA,KACXC,EAAAA,EAAAA,MAAA,OAAKC,UAAU,SAAQC,SAAA,EACnBC,EAAAA,EAAAA,KAACC,EAAAA,KAAI,CAACH,UAAU,cAAcI,GAAG,QAAOH,SAAC,uBACzCC,EAAAA,EAAAA,KAACC,EAAAA,KAAI,CAACH,UAAU,cAAcI,GAAG,cAAaH,SAAC,qCAC/CC,EAAAA,EAAAA,KAACC,EAAAA,KAAI,CAACH,UAAU,cAAcI,GAAG,cAAaH,SAAC,+BAC/CC,EAAAA,EAAAA,KAACC,EAAAA,KAAI,CAACH,UAAU,cAAcI,GAAG,UAASH,SAAC,qCAC3CF,EAAAA,EAAAA,MAAA,OAAKC,UAAU,eAAcC,SAAA,EACzBC,EAAAA,EAAAA,KAACC,EAAAA,KAAI,CAACC,GAAG,WAAUH,UACfC,EAAAA,EAAAA,KAAA,OAAKG,IAAI,mBAAmBC,IAAI,UAAUN,UAAU,YAExDE,EAAAA,EAAAA,KAACC,EAAAA,KAAI,CAACC,GAAG,YAAWH,UAChBC,EAAAA,EAAAA,KAAA,OAAKG,IAAI,sBAAsBC,IAAI,WAAWN,UAAU,iBAkBxE,EAZeO,IAAA,IAAC,SAAEN,GAAUM,EAAA,OACxBL,EAAAA,EAAAA,KAAA,OAAKF,UAAU,SAASQ,GAAG,UAASP,UAChCF,EAAAA,EAAAA,MAAA,OAAKS,GAAG,uBAAsBP,SAAA,EAC1BC,EAAAA,EAAAA,KAACJ,EAAM,KAEPI,EAAAA,EAAAA,KAAA,OAAKF,UAAU,kBAAiBC,SAC3BA,QAGP,ECfV,QAbA,SAAoBM,GAAa,IAAZ,SAACN,GAASM,EAC3B,OACIR,EAAAA,EAAAA,MAAA,UAAAE,SAAA,EACEC,EAAAA,EAAAA,KAACO,EAAS,KACZP,EAAAA,EAAAA,KAAA,OAAAD,UACIC,EAAAA,EAAAA,KAAA,QAAAD,SACKA,QAKjB,C,kHCNA,MAoJA,EApJsBS,KAClB,MAAOC,EAAQC,IAAaC,EAAAA,EAAAA,UAAS,KAC9BC,EAAcC,IAAmBF,EAAAA,EAAAA,UAAS,KAC1CG,EAAiBC,IAAsBJ,EAAAA,EAAAA,WAAS,GACjDK,GAAWC,EAAAA,EAAAA,UACXC,GAAaD,EAAAA,EAAAA,UACbE,GAAYF,EAAAA,EAAAA,UACZG,GAAeH,EAAAA,EAAAA,UACfI,GAAWC,EAAAA,EAAAA,MA8CXC,EAAmBC,MAAOC,EAAMC,KAClC,UC5CRF,eAAkCC,EAAMC,GAIpC,aAFuBC,EAAAA,EAAMC,OAAO,oCAAoCH,KAAQC,MAEhEG,IAEpB,CDuCkBC,CAAmBL,EAAMC,GAC/Bb,GAAgBkB,GAAaA,EAAUC,QAAOC,GAAQA,EAAKR,OAASA,KACxE,CAAE,MAAOS,GACLC,QAAQD,MAAM,uBAAwBA,EAC1C,GAGJ,OACIlC,EAAAA,EAAAA,KAACoC,EAAAA,EAAW,CAAArC,UACZF,EAAAA,EAAAA,MAAA,OAAKC,UAAU,iBAAgBC,SAAA,EAC3BF,EAAAA,EAAAA,MAAA,OAAKC,UAAU,OAAMC,SAAA,EACjBC,EAAAA,EAAAA,KAAA,OAAKF,UAAU,cAAaC,SAAC,oBAC7BC,EAAAA,EAAAA,KAAA,OAAKF,UAAU,YAAWC,UACtBF,EAAAA,EAAAA,MAAA,QAAMwC,SAxCDb,UACjBc,EAAEC,iBAEF,MAAMC,EAAW,IAAIC,SACrBD,EAASE,OAAO,QAAS1B,EAAS2B,QAAQC,OAC1CJ,EAASE,OAAO,UAAWxB,EAAWyB,QAAQC,OAC9CJ,EAASE,OAAO,SAAUvB,EAAUwB,QAAQC,OAE5ChC,EAAaiC,SAAQZ,IACjBO,EAASE,OAAO,YAAa,GAAGT,EAAKR,QAAQQ,EAAKP,WAAW,IAGjE,UACUC,EAAAA,EAAMmB,KAAK,2CAA4CN,EAAU,CACnEO,QAAS,CACL,eAAgB,yBAIxB1B,EAAS,cACb,CAAE,MAAOa,GACLC,QAAQD,MAAM,0BAA2BA,EAC7C,GAkByCnC,SAAA,EACzBF,EAAAA,EAAAA,MAAA,OAAKC,UAAU,mBAAkBC,SAAA,EAC7BC,EAAAA,EAAAA,KAAA,QAAMF,UAAU,mBAAkBC,SAAC,kBACnCC,EAAAA,EAAAA,KAAA,SAAOgD,KAAK,OAAOC,IAAKjC,EAAUlB,UAAU,eAAeoD,YAAY,cAG3ErD,EAAAA,EAAAA,MAAA,OAAKC,UAAU,mBAAkBC,SAAA,EAC7BC,EAAAA,EAAAA,KAAA,QAAMF,UAAU,mBAAkBC,SAAC,kBACnCC,EAAAA,EAAAA,KAAA,YAAUiD,IAAK/B,EAAYpB,UAAU,wBAAwBqD,KAAK,UAGtEtD,EAAAA,EAAAA,MAAA,OAAKC,UAAU,mBAAkBC,SAAA,EAC7BC,EAAAA,EAAAA,KAAA,QAAMF,UAAU,mBAAkBC,SAAC,wBACnCC,EAAAA,EAAAA,KAAA,SAAOgD,KAAK,OAAOC,IAAK9B,EAAWrB,UAAU,eAAeoD,YAAY,SAASE,UAAQ,QAG7FvD,EAAAA,EAAAA,MAAA,OAAKC,UAAU,mBAAkBC,SAAA,EAC7BC,EAAAA,EAAAA,KAAA,QAAMF,UAAU,mBAAkBC,SAAC,wBACnCC,EAAAA,EAAAA,KAAA,OAAKF,UAAU,yBAAwBC,UACnCC,EAAAA,EAAAA,KAAA,UAAQgD,KAAK,SAASlD,UAAU,kBAAkBuD,QAASA,IAAMtC,GAAmB,GAAMhB,SAAC,oBAMnGC,EAAAA,EAAAA,KAAA,OAAKF,UAAU,OAAMC,UACjBF,EAAAA,EAAAA,MAAA,OAAKC,UAAU,YAAWC,SAAA,EACtBC,EAAAA,EAAAA,KAAA,UAAQgD,KAAK,SAASlD,UAAU,kBAAiBC,SAAC,kBAClDC,EAAAA,EAAAA,KAAA,UAAQgD,KAAK,QAAQlD,UAAU,oBAAmBC,SAAC,+BAQvEC,EAAAA,EAAAA,KAAA,OAAKF,UAAU,WAAUC,UACrBC,EAAAA,EAAAA,KAAA,OAAKF,UAAU,MAAKC,UAChBC,EAAAA,EAAAA,KAAA,OAAKF,UAAU,sCAAsCwD,MAAO,CAAEC,SAAU,QAASxD,SAC5Ea,EAAa4C,KAAIvB,IACdpC,EAAAA,EAAAA,MAAA,OAAKC,UAAU,aAAYC,SAAA,EACvBF,EAAAA,EAAAA,MAAA,OAAKC,UAAU,4CAA2CC,SAAA,CACrDkC,EAAKP,UACN1B,EAAAA,EAAAA,KAAA,UAAQF,UAAU,yBAAyBuD,QAASA,IAAM9B,EAAiBU,EAAKR,KAAMQ,EAAKP,UAAU3B,SAAC,UAE1GC,EAAAA,EAAAA,KAAA,OAAKF,UAAU,YAAWC,UACtBC,EAAAA,EAAAA,KAAA,OAAKG,IAAK8B,EAAKwB,IAAKrD,IAAK6B,EAAKP,eANLO,EAAKR,eAetDzB,EAAAA,EAAAA,KAAA,OAAKF,UAAW,UAASgB,EAAkB,eAAiB,IAAM4C,SAAS,KAAKC,KAAK,SAAQ5D,UACzFC,EAAAA,EAAAA,KAAA,OAAKF,UAAU,eAAcC,UACzBF,EAAAA,EAAAA,MAAA,OAAKC,UAAU,gBAAeC,SAAA,EAC1BF,EAAAA,EAAAA,MAAA,OAAKC,UAAU,eAAcC,SAAA,EACzBC,EAAAA,EAAAA,KAAA,MAAIF,UAAU,cAAaC,SAAC,qCAC5BC,EAAAA,EAAAA,KAAA,UAAQgD,KAAK,SAASlD,UAAU,YAAYuD,QAASA,IAAMtC,GAAmB,SAElFf,EAAAA,EAAAA,KAAA,OAAKF,UAAU,aAAYC,UACvBC,EAAAA,EAAAA,KAAA,OAAKF,UAAU,mBAAkBC,UAC7BC,EAAAA,EAAAA,KAAA,SAAOgD,KAAK,OAAOC,IAAK7B,EAActB,UAAU,eAAe8D,UAAQ,SAG/E/D,EAAAA,EAAAA,MAAA,OAAKC,UAAU,eAAcC,SAAA,EACzBC,EAAAA,EAAAA,KAAA,UAAQgD,KAAK,SAASlD,UAAU,kBAAkBuD,QA/HhD7B,UACtB,MAAMgB,EAAW,IAAIC,SACrB,IAAK,IAAIR,KAAQb,EAAauB,QAAQkB,MAClCrB,EAASE,OAAO,QAAST,GAG7B,IACI,MAAMJ,QCvBlBL,eAA+BsC,GAc3B,OAZA3B,QAAQ4B,IAAI,0BACZ5B,QAAQ4B,IAAID,UAEWnC,EAAAA,EAAAA,GAAM,CACzBqC,OAAQ,OACRP,IAAK,mCACL5B,KAAMiC,EACNf,QAAS,CACL,eAAgB,0BAIRlB,IACpB,CDQ+BoC,CAAezB,GAClC3B,EAAgBgB,EAAK2B,KAAIvB,IAAI,IACtBA,EACHwB,IAAK,kCAAkCxB,EAAKR,QAAQQ,EAAKP,gBAE7DX,GAAmB,EACvB,CAAE,MAAOmB,GACLC,QAAQD,MAAM,iBAAkBA,GAChCxB,EAAU,CAAC,mGACf,GA+GiGX,SAAC,wBAC9EC,EAAAA,EAAAA,KAAA,UAAQgD,KAAK,SAASlD,UAAU,uBAAuBuD,QAASA,IAAMtC,GAAmB,GAAOhB,SAAC,+BAMvG,C","sources":["components/menus/basic.js","layout/BasicLayout.js","pages/board/register.js","upload.js"],"sourcesContent":["import React from 'react';\nimport { Link } from 'react-router-dom';\nimport 'bootstrap/dist/css/bootstrap.min.css';\nimport 'bootstrap/dist/js/bootstrap.bundle.min';\n\nconst Header = () => (\n    <div className=\"header\">\n        <Link className=\"header-item\" to=\"/main\">🏠 Home</Link>\n        <Link className=\"header-item\" to=\"/place/list\">여행지 정보</Link>\n        <Link className=\"header-item\" to=\"/board/list\">리뷰 목록</Link>\n        <Link className=\"header-item\" to=\"/mypage\">마이 페이지</Link>\n        <div className=\"header-icons\">\n            <Link to=\"/profile\">\n                <img src=\"/assets/user.jpg\" alt=\"Profile\" className=\"icon\" />\n            </Link>\n            <Link to=\"/settings\">\n                <img src=\"/assets/setting.jpg\" alt=\"Settings\" className=\"icon\" />\n            </Link>\n        </div>\n    </div>\n);\n\nconst Layout = ({ children }) => (\n    <div className=\"d-flex\" id=\"wrapper\">\n        <div id=\"page-content-wrapper\">\n            <Header />\n            {/* Page content */}\n            <div className=\"container-fluid\">\n                {children}\n            </div>\n        </div>\n    </div>\n);\n\nexport default Layout;\n","import React from \"react\";\nimport BasicMenu from '../components/menus/basic';\n\nfunction BasicLayout({children}){\n    return(\n        <header>\n          <BasicMenu/>\n        <div>\n            <main>\n                {children}\n            </main>\n        </div>\n        </header>\n    )\n}\n\nexport default BasicLayout;","import React, { useState, useRef } from 'react';\nimport axios from 'axios';\nimport { useNavigate } from 'react-router-dom';\nimport 'bootstrap/dist/css/bootstrap.min.css';\nimport 'bootstrap/dist/js/bootstrap.bundle.min';\nimport BasicLayout from \"../../layout/BasicLayout\";\nimport { uploadToServer, removeFileToServer } from '../../upload'; // upload.js의 함수 임포트\n\nconst BoardRegister = () => {\n    const [errors, setErrors] = useState([]);\n    const [filePreviews, setFilePreviews] = useState([]);\n    const [showUploadModal, setShowUploadModal] = useState(false);\n    const titleRef = useRef();\n    const contentRef = useRef();\n    const writerRef = useRef();\n    const fileInputRef = useRef();\n    const navigate = useNavigate(); // useNavigate 훅을 사용하여 페이지 이동\n\n    const handleUploadFiles = async () => {\n        const formData = new FormData();\n        for (let file of fileInputRef.current.files) {\n            formData.append('files', file);\n        }\n\n        try {\n            const data = await uploadToServer(formData);\n            setFilePreviews(data.map(file => ({\n                ...file,\n                url: `http://localhost:8080/api/view/${file.uuid}_${file.fileName}`\n            })));\n            setShowUploadModal(false);\n        } catch (error) {\n            console.error('Upload failed:', error);\n            setErrors(['파일 업로드 중 문제가 발생했습니다.']);\n        }\n    };\n\n    const handleSubmit = async (e) => {\n        e.preventDefault();\n\n        const formData = new FormData();\n        formData.append('title', titleRef.current.value);\n        formData.append('content', contentRef.current.value);\n        formData.append('writer', writerRef.current.value);\n\n        filePreviews.forEach(file => {\n            formData.append('fileNames', `${file.uuid}_${file.fileName}`);\n        });\n\n        try {\n            await axios.post('http://localhost:8080/api/board/register', formData, {\n                headers: {\n                    'Content-Type': 'multipart/form-data',\n                },\n            });\n            // 폼 제출 후 리셋 및 리디렉션 처리\n            navigate('/board/list'); // 게시판 목록 페이지로 이동\n        } catch (error) {\n            console.error('Form submission failed:', error);\n        }\n    };\n\n    const handleRemoveFile = async (uuid, fileName) => {\n        try {\n            await removeFileToServer(uuid, fileName); // upload.js의 함수를 호출;\n            setFilePreviews(prevFiles => prevFiles.filter(file => file.uuid !== uuid));\n        } catch (error) {\n            console.error('File removal failed:', error);\n        }\n    };\n\n    return (\n        <BasicLayout>\n        <div className=\"container mt-3\">\n            <div className=\"card\">\n                <div className=\"card-header\">Board Register</div>\n                <div className=\"card-body\">\n                    <form onSubmit={handleSubmit}>\n                        <div className=\"input-group mb-3\">\n                            <span className=\"input-group-text\">제목</span>\n                            <input type=\"text\" ref={titleRef} className=\"form-control\" placeholder=\"Title\" />\n                        </div>\n\n                        <div className=\"input-group mb-3\">\n                            <span className=\"input-group-text\">내용</span>\n                            <textarea ref={contentRef} className=\"form-control col-sm-5\" rows=\"5\" />\n                        </div>\n\n                        <div className=\"input-group mb-3\">\n                            <span className=\"input-group-text\">글쓴이</span>\n                            <input type=\"text\" ref={writerRef} className=\"form-control\" placeholder=\"Writer\" readOnly />\n                        </div>\n\n                        <div className=\"input-group mb-3\">\n                            <span className=\"input-group-text\">이미지</span>\n                            <div className=\"float-end uploadHidden\">\n                                <button type=\"button\" className=\"btn btn-primary\" onClick={() => setShowUploadModal(true)}>\n                                    ADD Files\n                                </button>\n                            </div>\n                        </div>\n\n                        <div className=\"my-4\">\n                            <div className=\"float-end\">\n                                <button type=\"submit\" className=\"btn btn-primary\">등록</button>\n                                <button type=\"reset\" className=\"btn btn-secondary\">리셋</button>\n                            </div>\n                        </div>\n                    </form>\n                </div>\n            </div>\n\n            {/* 첨부 파일 섬네일을 보여줄 부분 */}\n            <div className=\"row mt-3\">\n                <div className=\"col\">\n                    <div className=\"container-fluid d-flex uploadResult\" style={{ flexWrap: 'wrap' }}>\n                        {filePreviews.map(file => (\n                            <div className=\"card col-4\" key={file.uuid}>\n                                <div className=\"card-header d-flex justify-content-center\">\n                                    {file.fileName}\n                                    <button className=\"btn-sm btn-danger ms-2\" onClick={() => handleRemoveFile(file.uuid, file.fileName)}>X</button>\n                                </div>\n                                <div className=\"card-body\">\n                                    <img src={file.url} alt={file.fileName} />\n                                </div>\n                            </div>\n                        ))}\n                    </div>\n                </div>\n            </div>\n\n            {/* 첨부파일 추가를 위한 모달창 */}\n            <div className={`modal ${showUploadModal ? 'show d-block' : ''}`} tabIndex=\"-1\" role=\"dialog\">\n                <div className=\"modal-dialog\">\n                    <div className=\"modal-content\">\n                        <div className=\"modal-header\">\n                            <h5 className=\"modal-title\">업로드 파일</h5>\n                            <button type=\"button\" className=\"btn-close\" onClick={() => setShowUploadModal(false)}></button>\n                        </div>\n                        <div className=\"modal-body\">\n                            <div className=\"input-group mb-3\">\n                                <input type=\"file\" ref={fileInputRef} className=\"form-control\" multiple />\n                            </div>\n                        </div>\n                        <div className=\"modal-footer\">\n                            <button type=\"button\" className=\"btn btn-primary\" onClick={handleUploadFiles}>업로드</button>\n                            <button type=\"button\" className=\"btn btn-outline-dark\" onClick={() => setShowUploadModal(false)}>닫기</button>\n                        </div>\n                    </div>\n                </div>\n            </div>\n        </div>\n        </BasicLayout>\n    );\n};\n\nexport default BoardRegister;\n","import axios from \"axios\";\n\nasync function uploadToServer (formObj) {\n\n    console.log(\"upload to server......\")\n    console.log(formObj)\n\n    const response = await axios({\n        method: 'post',\n        url: 'http://localhost:8080/api/upload',\n        data: formObj,\n        headers: {\n            'Content-Type': 'multipart/form-data',\n        },\n    });\n\n    return response.data\n}\n\nasync function removeFileToServer(uuid, fileName){\n\n    const response = await axios.delete(`http://localhost:8080/api/remove/${uuid}_${fileName}`)\n\n    return response.data\n\n}\n\nexport {uploadToServer, removeFileToServer};"],"names":["Header","_jsxs","className","children","_jsx","Link","to","src","alt","_ref","id","BasicMenu","BoardRegister","errors","setErrors","useState","filePreviews","setFilePreviews","showUploadModal","setShowUploadModal","titleRef","useRef","contentRef","writerRef","fileInputRef","navigate","useNavigate","handleRemoveFile","async","uuid","fileName","axios","delete","data","removeFileToServer","prevFiles","filter","file","error","console","BasicLayout","onSubmit","e","preventDefault","formData","FormData","append","current","value","forEach","post","headers","type","ref","placeholder","rows","readOnly","onClick","style","flexWrap","map","url","tabIndex","role","multiple","files","formObj","log","method","uploadToServer"],"sourceRoot":""}